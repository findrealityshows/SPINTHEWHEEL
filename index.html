<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Spin & Win</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #111;
      color: #fff;
      text-align: center;
    }
    #loginScreen, #mainApp {
      display: none;
      padding: 20px;
    }
    .visible {
      display: block;
    }
    input, button {
      padding: 10px;
      margin: 10px;
      font-size: 16px;
    }
    .wheel-container {
      position: relative;
      margin: 20px auto;
      width: 300px;
      height: 300px;
      border-radius: 50%;
      overflow: hidden;
      border: 10px solid #fff;
    }
    .wheel {
      width: 100%;
      height: 100%;
      transition: transform 4s cubic-bezier(0.33, 1, 0.68, 1);
    }
    .wheel-slice {
      position: absolute;
      width: 50%;
      height: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transform-origin: 100% 100%;
      clip-path: polygon(0 0, 100% 0, 100% 100%);
      color: #fff;
      font-weight: bold;
    }
    .pointer {
      width: 0;
      height: 0;
      border-left: 20px solid transparent;
      border-right: 20px solid transparent;
      border-bottom: 30px solid yellow;
      position: absolute;
      top: -30px;
      left: calc(50% - 20px);
      z-index: 10;
    }
    #withdrawFeed {
      height: 40px;
      overflow: hidden;
      background: #222;
      padding: 10px;
      font-size: 14px;
      margin: 20px auto;
      width: 90%;
    }
    #wallet {
      margin: 10px;
      font-size: 18px;
    }
  </style>
</head>
<body>

<div id="loginScreen" class="visible">
  <h2>Login to Spin & Win</h2>
  <input type="text" id="username" placeholder="Enter your name" />
  <button onclick="login()">Enter</button>
</div>

<div id="mainApp">
  <h2>Welcome, <span id="userDisplay"></span> ðŸŽ‰</h2>
  <div id="wallet">Wallet Balance: â‚¹<span id="balance">0</span></div>
  <button onclick="addCash()">Add Cash</button>

  <div id="withdrawFeed">Loading live withdrawal feed...</div>

  <div class="wheel-container">
    <div class="pointer"></div>
    <div class="wheel" id="wheel"></div>
  </div>

  <button onclick="spin()">SPIN</button>
</div>

<script>
  const prizes = ['â‚¹100', 'â‚¹250', 'â‚¹0', 'â‚¹500', 'Try Again', 'â‚¹1000'];
  const sliceDeg = 360 / prizes.length;
  const wheel = document.getElementById('wheel');

  let spinning = false;
  let balance = 0;

  // Create wheel slices
  prizes.forEach((prize, i) => {
    const slice = document.createElement('div');
    slice.className = 'wheel-slice';
    slice.style.transform = `rotate(${i * sliceDeg}deg)`;
    slice.style.background = i % 2 === 0 ? '#E91E63' : '#3F51B5';
    slice.innerText = prize;
    wheel.appendChild(slice);
  });

  function login() {
    const name = document.getElementById('username').value.trim();
    if (!name) return alert('Please enter your name.');
    document.getElementById('userDisplay').innerText = name;
    document.getElementById('loginScreen').classList.remove('visible');
    document.getElementById('mainApp').classList.add('visible');
    startWithdrawFeed();
  }

  function spin() {
    if (spinning) return;
    spinning = true;
    const randomSpin = 360 * 5 + Math.floor(Math.random() * 360);
    wheel.style.transform = `rotate(${randomSpin}deg)`;

    setTimeout(() => {
      const finalDeg = randomSpin % 360;
      const index = Math.floor((360 - finalDeg + sliceDeg / 2) % 360 / sliceDeg);
      const result = prizes[index];

      if (result.startsWith('â‚¹')) {
        const amount = parseInt(result.replace(/[^\d]/g, ''));
        balance += amount;
        alert('You won: ' + result);
      } else {
        alert(result);
      }

      updateBalance();
      spinning = false;
    }, 4500);
  }

  function updateBalance() {
    document.getElementById('balance').innerText = balance;
  }

  function addCash() {
    const amount = Math.floor(Math.random() * 1000) + 500;
    balance += amount;
    alert(`â‚¹${amount} added to your wallet!`);
    updateBalance();
  }

  function startWithdrawFeed() {
    const feed = document.getElementById('withdrawFeed');
    const names = ['Amit', 'Sneha', 'Ravi', 'Priya', 'Karan', 'Neha', 'Rahul', 'Simran', 'Deepak'];

    setInterval(() => {
      const randomName = names[Math.floor(Math.random() * names.length)];
      const amount = Math.floor(Math.random() * 4800) + 200;
      feed.innerText = `${randomName} withdrew â‚¹${amount}`;
    }, 3000);
  }
</script>

</body>
</html>
