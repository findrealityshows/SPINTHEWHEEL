<!DOCTYPE html>
<html>
<head>
  <title>Spin Game</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #111;
      color: white;
      text-align: center;
    }

    header {
      background: #222;
      padding: 10px;
    }

    #cash {
      font-size: 24px;
      margin: 10px 0;
    }

    #wheel {
      margin: 30px auto;
      width: 200px;
      height: 200px;
      border: 10px solid #333;
      border-radius: 50%;
      position: relative;
      animation: none;
      background: conic-gradient(
        #f44336 0% 25%, 
        #4caf50 25% 50%, 
        #2196f3 50% 75%, 
        #ffc107 75% 100%
      );
    }

    #pointer {
      width: 0; height: 0;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-bottom: 25px solid red;
      position: absolute;
      top: -25px;
      left: 85px;
    }

    button {
      padding: 12px 24px;
      font-size: 18px;
      margin: 10px;
      background: #28a745;
      border: none;
      color: white;
      cursor: pointer;
    }

    #feed {
      background: #222;
      max-height: 120px;
      overflow-y: auto;
      padding: 10px;
      font-size: 14px;
      margin: 20px auto;
      width: 300px;
      border-radius: 8px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(1440deg); }
    }
  </style>
</head>
<body>

<header>
  <h2>Welcome, <span id="user"></span>!</h2>
  <div id="cash">Cash: ₹<span id="balance">1000</span></div>
  <button onclick="addCash()">Add ₹</button>
</header>

<div id="wheel">
  <div id="pointer"></div>
</div>
<button onclick="spin()">Spin Wheel</button>

<h3>Live Withdrawals</h3>
<div id="feed"></div>

<script>
  let balance = 1000;
  const user = localStorage.getItem('user') || 'Guest';
  document.getElementById('user').innerText = user;
  document.getElementById('balance').innerText = balance;

  function addCash() {
    let amount = Math.floor(Math.random() * 500 + 100);
    balance += amount;
    updateBalance();
  }

  function updateBalance() {
    document.getElementById('balance').innerText = balance;
  }

  function spin() {
    const wheel = document.getElementById('wheel');
    wheel.style.animation = 'spin 2s ease-out';
    setTimeout(() => {
      let win = [200, 300, 500, 1000][Math.floor(Math.random() * 4)];
      alert("You won ₹" + win);
      balance += win;
      updateBalance();
      wheel.style.animation = 'none';
      void wheel.offsetWidth; // restart animation
    }, 2000);
  }

  // Live fake withdrawals feed
  const feed = document.getElementById('feed');
  const names = ["Raj", "Amit", "Sara", "Kiran", "Anu", "Dev"];
  function randomWithdraw() {
    let name = names[Math.floor(Math.random() * names.length)];
    let amt = Math.floor(Math.random() * 4800 + 200);
    let line = `${name} withdrew ₹${amt}`;
    let p = document.createElement('p');
    p.innerText = line;
    if (feed.children.length > 5) feed.removeChild(feed.firstChild);
    feed.appendChild(p);
  }

  setInterval(randomWithdraw, 3000);
</script>

</body>
</html>
